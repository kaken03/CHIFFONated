{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { collection, query, onSnapshot, orderBy, where } from 'firebase/firestore';\nimport { db } from '../config/firebase';\nexport const useFirestore = (collectionName, options = {}) => {\n  _s();\n  const [documents, setDocuments] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    setLoading(true);\n    setError(null);\n    try {\n      let q = collection(db, collectionName);\n\n      // apply simple options: orderBy and where (options: { orderBy: ['field','asc'], where: ['field','==', value] })\n      const constraints = [];\n      if (options.where && Array.isArray(options.where)) {\n        const [field, op, value] = options.where;\n        constraints.push(where(field, op, value));\n      }\n      if (options.orderBy && Array.isArray(options.orderBy)) {\n        const [field, direction] = options.orderBy;\n        constraints.push(orderBy(field, direction || 'asc'));\n      }\n      if (constraints.length) q = query(q, ...constraints);\n      const unsub = onSnapshot(q, snapshot => {\n        const docs = snapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        setDocuments(docs);\n        setLoading(false);\n      }, err => {\n        setError(err);\n        setLoading(false);\n      });\n      return () => unsub();\n    } catch (err) {\n      setError(err);\n      setLoading(false);\n    }\n  }, [collectionName, JSON.stringify(options)]);\n  return {\n    documents,\n    loading,\n    error\n  };\n};\n_s(useFirestore, \"o3mkwHkHtoTWNVniHIJ+RCnUDZI=\");","map":{"version":3,"names":["useEffect","useState","collection","query","onSnapshot","orderBy","where","db","useFirestore","collectionName","options","_s","documents","setDocuments","loading","setLoading","error","setError","q","constraints","Array","isArray","field","op","value","push","direction","length","unsub","snapshot","docs","map","doc","id","data","err","JSON","stringify"],"sources":["C:/Users/KAKEN/chiffonated/src/hooks/useFirestore.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { collection, query, onSnapshot, orderBy, where } from 'firebase/firestore';\nimport { db } from '../config/firebase';\n\nexport const useFirestore = (collectionName, options = {}) => {\n    const [documents, setDocuments] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        setLoading(true);\n        setError(null);\n\n        try {\n            let q = collection(db, collectionName);\n\n            // apply simple options: orderBy and where (options: { orderBy: ['field','asc'], where: ['field','==', value] })\n            const constraints = [];\n            if (options.where && Array.isArray(options.where)) {\n                const [field, op, value] = options.where;\n                constraints.push(where(field, op, value));\n            }\n            if (options.orderBy && Array.isArray(options.orderBy)) {\n                const [field, direction] = options.orderBy;\n                constraints.push(orderBy(field, direction || 'asc'));\n            }\n            if (constraints.length) q = query(q, ...constraints);\n\n            const unsub = onSnapshot(\n                q,\n                (snapshot) => {\n                    const docs = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n                    setDocuments(docs);\n                    setLoading(false);\n                },\n                (err) => {\n                    setError(err);\n                    setLoading(false);\n                }\n            );\n\n            return () => unsub();\n        } catch (err) {\n            setError(err);\n            setLoading(false);\n        }\n    }, [collectionName, JSON.stringify(options)]);\n\n    return { documents, loading, error };\n};"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,UAAU,EAAEC,KAAK,EAAEC,UAAU,EAAEC,OAAO,EAAEC,KAAK,QAAQ,oBAAoB;AAClF,SAASC,EAAE,QAAQ,oBAAoB;AAEvC,OAAO,MAAMC,YAAY,GAAGA,CAACC,cAAc,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EAAAC,EAAA;EAC1D,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACa,OAAO,EAAEC,UAAU,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACe,KAAK,EAAEC,QAAQ,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EAExCD,SAAS,CAAC,MAAM;IACZe,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAI;MACA,IAAIC,CAAC,GAAGhB,UAAU,CAACK,EAAE,EAAEE,cAAc,CAAC;;MAEtC;MACA,MAAMU,WAAW,GAAG,EAAE;MACtB,IAAIT,OAAO,CAACJ,KAAK,IAAIc,KAAK,CAACC,OAAO,CAACX,OAAO,CAACJ,KAAK,CAAC,EAAE;QAC/C,MAAM,CAACgB,KAAK,EAAEC,EAAE,EAAEC,KAAK,CAAC,GAAGd,OAAO,CAACJ,KAAK;QACxCa,WAAW,CAACM,IAAI,CAACnB,KAAK,CAACgB,KAAK,EAAEC,EAAE,EAAEC,KAAK,CAAC,CAAC;MAC7C;MACA,IAAId,OAAO,CAACL,OAAO,IAAIe,KAAK,CAACC,OAAO,CAACX,OAAO,CAACL,OAAO,CAAC,EAAE;QACnD,MAAM,CAACiB,KAAK,EAAEI,SAAS,CAAC,GAAGhB,OAAO,CAACL,OAAO;QAC1Cc,WAAW,CAACM,IAAI,CAACpB,OAAO,CAACiB,KAAK,EAAEI,SAAS,IAAI,KAAK,CAAC,CAAC;MACxD;MACA,IAAIP,WAAW,CAACQ,MAAM,EAAET,CAAC,GAAGf,KAAK,CAACe,CAAC,EAAE,GAAGC,WAAW,CAAC;MAEpD,MAAMS,KAAK,GAAGxB,UAAU,CACpBc,CAAC,EACAW,QAAQ,IAAK;QACV,MAAMC,IAAI,GAAGD,QAAQ,CAACC,IAAI,CAACC,GAAG,CAACC,GAAG,KAAK;UAAEC,EAAE,EAAED,GAAG,CAACC,EAAE;UAAE,GAAGD,GAAG,CAACE,IAAI,CAAC;QAAE,CAAC,CAAC,CAAC;QACtErB,YAAY,CAACiB,IAAI,CAAC;QAClBf,UAAU,CAAC,KAAK,CAAC;MACrB,CAAC,EACAoB,GAAG,IAAK;QACLlB,QAAQ,CAACkB,GAAG,CAAC;QACbpB,UAAU,CAAC,KAAK,CAAC;MACrB,CACJ,CAAC;MAED,OAAO,MAAMa,KAAK,CAAC,CAAC;IACxB,CAAC,CAAC,OAAOO,GAAG,EAAE;MACVlB,QAAQ,CAACkB,GAAG,CAAC;MACbpB,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC,EAAE,CAACN,cAAc,EAAE2B,IAAI,CAACC,SAAS,CAAC3B,OAAO,CAAC,CAAC,CAAC;EAE7C,OAAO;IAAEE,SAAS;IAAEE,OAAO;IAAEE;EAAM,CAAC;AACxC,CAAC;AAACL,EAAA,CA7CWH,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module"}